<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="page_title">নিরাময় - আপনার স্বাস্থ্য, আপনার ভাষায়</title>
    <!-- Google Fonts for Bengali and English -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* =================================
           1. General and Global Styles
        ==================================== */
        :root {
            --primary-blue: #3B82F6;
            --background-white: #F9FAFB;
            --accent-warm: #F59E0B;
            --text-dark: #1F2937;
            --text-light: #6B7281;
            --calm-green: #10B981;
            --emergency-red: #EF4444;
        }

        body {
            font-family: 'Noto Sans Bengali', 'Inter', sans-serif;
            background-color: var(--background-white);
            color: var(--text-dark);
            margin: 0;
        }

        .hidden {
            display: none;
        }
        
        #main-app-wrapper {
             padding-top: 140px;
        }

        /* =================================
           Navigation Styles
        ==================================== */
        .desktop-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--background-white);
            z-index: 1000;
            border-bottom: 1px solid #e5e7eb;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 90%;
            max-width: 1200px;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            text-decoration: none;
            cursor: pointer;
        }
        
        .search-container {
            display: flex;
            align-items: center;
            background: #e0e5ec;
            border-radius: 25px;
            box-shadow: inset 4px 4px 8px #babecc, inset -4px -4px 8px #ffffff;
            padding: 5px 8px;
        }

        .search-input {
            border: none;
            background: transparent;
            outline: none;
            padding: 5px 10px;
            font-family: 'Noto Sans Bengali', sans-serif;
            color: var(--text-dark);
            width: 150px;
            transition: width 0.3s ease-in-out;
        }

        .search-input::placeholder { color: var(--text-light); }
        .search-btn { border: none; background: transparent; color: var(--primary-blue); cursor: pointer; font-size: 1rem; padding: 5px; }
        
        .nav-desktop {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
            width: fit-content;
            padding: 8px 15px;
            border-radius: 25px;
            background: #e0e5ec;
            box-shadow: inset 5px 5px 10px #babecc, inset -5px -5px 10px #ffffff;
            align-self: flex-end;
            margin-right: 5%;
        }

        .nav-desktop .menu { display: flex; gap: 20px; align-items: center; }
        .nav-desktop .menu a { color: #555; text-decoration: none; font-size: 16px; font-family: 'Noto Sans Bengali', sans-serif; padding: 8px 12px; border-radius: 15px; box-shadow: 5px 5px 10px #babecc, -5px -5px 10px #ffffff; display: flex; align-items: center; transition: all 0.3s ease; white-space: nowrap; }
        .nav-desktop .menu a i { margin-right: 8px; }
        .nav-desktop .menu a:hover { transform: scale(1.1); }
        .nav-desktop .menu a.active { background: #e0e5ec; color: var(--primary-blue); font-weight: bold; box-shadow: inset 5px 5px 10px #babecc, inset -5px -5px 10px #ffffff; }

        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 15px;
            left: 15px;
            right: 15px;
            justify-content: space-around;
            padding: 12px 0;
            border-radius: 25px;
            background: #e0e5ec;
            box-shadow: inset 5px 5px 10px #babecc, inset -5px -5px 10px #ffffff;
            z-index: 100;
        }

        .bottom-nav a { color: #555; text-decoration: none; font-size: 14px; font-family: 'Noto Sans Bengali', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 8px 12px; border-radius: 15px; box-shadow: 5px 5px 10px #babecc, -5px -5px 10px #ffffff; transition: all 0.3s ease; white-space: nowrap; }
        .bottom-nav a i { font-size: 20px; margin-bottom: 3px; }
        .bottom-nav a.active { background: #e0e5ec; color: var(--primary-blue); font-weight: bold; box-shadow: inset 5px 5px 10px #babecc, inset -5px -5px 10px #ffffff; }
        
        #language-switcher { margin-left: 20px; padding: 8px 12px; border-radius: 15px; border: none; background: #e0e5ec; box-shadow: 5px 5px 10px #babecc, -5px -5px 10px #ffffff; cursor: pointer; font-family: 'Noto Sans Bengali', sans-serif; }
        #language-switcher-mobile { display: none; }

        @media (max-width: 768px) {
            #main-app-wrapper { padding-top: 80px; padding-bottom: 80px; }
            .desktop-header { padding-bottom: 10px; }
            .nav-desktop { display: none; }
            .bottom-nav { display: flex; }
            .search-input { width: 80px; }
            .logo { font-size: 1.8rem; }
            #language-switcher-mobile { display: block; padding: 4px 8px; font-size: 12px; border-radius: 12px; border: none; background: #e0e5ec; box-shadow: 3px 3px 6px #babecc, -3px -3px 6px #ffffff; cursor: pointer; font-family: 'Noto Sans Bengali', sans-serif; margin-left: 8px; }
            .search-and-lang-wrapper { display: flex; align-items: center; }
        }
        
        /* =================================
           Main App Section Styles
        ==================================== */
        .chat-page { display: flex; justify-content: center; align-items: center; min-height: calc(100vh - 140px); background: linear-gradient(45deg, #e0f7fa, #e8eaf6); background-size: 200% 200%; animation: calm-background 15s ease infinite; box-sizing: border-box; }
        @keyframes calm-background { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .chat-container { width: 95%; max-width: 700px; height: 80vh; max-height: 700px; background: white; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .chat-header { padding: 1rem; border-bottom: 1px solid #eee; text-align: center; }
        .chat-box { flex-grow: 1; padding: 1rem; overflow-y: auto; display: flex; flex-direction: column; }
        .chat-bubble { padding: 0.8rem 1.2rem; border-radius: 18px; margin-bottom: 1rem; max-width: 80%; display: flex; align-items: center; line-height: 1.5; }
        .chat-bubble.ai { background-color: #ECEFF1; align-self: flex-start; }
        .chat-bubble.user { background-color: var(--primary-blue); color: white; align-self: flex-end; }
        .chat-bubble .icon { margin-right: 0.7rem; color: var(--primary-blue); }
        .chat-input { display: flex; padding: 1rem; border-top: 1px solid #eee; gap: 0.5rem; }
        .chat-input input { flex-grow: 1; border: none; background: #f0f0f0; padding: 0.8rem; border-radius: 20px; outline: none; }
        .chat-input button { border: none; background: transparent; font-size: 1.5rem; cursor: pointer; color: var(--primary-blue); padding: 0 0.5rem; }
        .typing-indicator { display: flex; align-items: center; }
        .typing-indicator span { height: 8px; width: 8px; background-color: #90A4AE; border-radius: 50%; display: inline-block; margin: 0 2px; animation: pulse 1.4s infinite; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes pulse { 0%, 100% { opacity: 0.3; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1); } }

        .dashboard-page, .booking-page { padding: 2rem; max-width: 1200px; margin: auto; }
        .dashboard-header { margin-bottom: 2rem; text-align: center; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .card { background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.07); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .card h3 { margin-top: 0; display: flex; align-items: center; font-size: 1.2rem; }
        .card h3 i { margin-right: 0.8rem; color: var(--primary-blue); }
        .card ul { padding-left: 1.2rem; color: var(--text-light); }
        .btn-primary, .btn-upload { background-color: var(--primary-blue); color: white; padding: 0.7rem 1.2rem; border-radius: 8px; border: none; cursor: pointer; width: 100%; margin-top: 1rem; }
        .card-ai-insights { background-color: #FFFBEB; border-left: 4px solid var(--accent-warm); }
        .card-ai-insights h3 i { color: var(--accent-warm); }
        .mood-meter .mood-icons { display: flex; justify-content: space-around; font-size: 2rem; cursor: pointer; padding-top: 1rem; }
        .mood-meter .mood-icons span { transition: transform 0.2s; }
        .mood-meter .mood-icons span:hover { transform: scale(1.2); }

        .filters { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 2rem; }
        .filters select { padding: 0.8rem; border-radius: 8px; border: 1px solid #ddd; flex-grow: 1; background-color: white; }
        .doctor-card { display: flex; align-items: center; background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.07); margin-bottom: 1.5rem; gap: 1.5rem; flex-wrap: wrap; }
        .doctor-card img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
        .doctor-info { flex-grow: 1; }
        .doctor-info h4, .doctor-info p { margin: 0.2rem 0; }
        .rating { color: var(--accent-warm); font-size: 0.9rem; }
        .tags { margin-top: 0.5rem; }
        .tag { background-color: #eee; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.8rem; display: inline-block; margin-right: 0.5rem; }
        .btn-book { background-color: var(--calm-green); color: white; padding: 0.8rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-left: auto; }

        .emergency-page { background-color: #FFF5F5; display: flex; justify-content: center; align-items: center; min-height: calc(100vh - 140px); text-align: center; padding: 1rem; }
        .emergency-container { max-width: 500px; width: 100%; }
        .sos-button { width: 180px; height: 180px; background-color: var(--emergency-red); color: white; border: none; border-radius: 50%; font-size: 2.5rem; cursor: pointer; display: flex; flex-direction: column; justify-content: center; align-items: center; animation: pulse-sos 2s infinite; box-shadow: 0 0 0 0 rgba(239, 68, 68, 1); margin: 0 auto; }
        @keyframes pulse-sos { 0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 30px rgba(239, 68, 68, 0); } 100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        .emergency-container p { font-size: 1.2rem; color: #B91C1C; margin-top: 2rem; font-weight: bold; }
        .quick-calls { display: flex; justify-content: center; gap: 1.5rem; margin-top: 2rem; }
        .call-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; color: var(--text-dark); font-weight: bold; padding: 1rem; background: white; border-radius: 12px; width: 100px; height: 100px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .call-btn i { font-size: 2rem; margin-bottom: 0.5rem; color: var(--emergency-red); }

        /* =================================
           Authentication Wrapper & Page Styles
        ==================================== */
        #auth-wrapper {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
        }
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .auth-header .logo { font-size: 2.5rem; }
        .auth-container { width: 100%; max-width: 450px; }
        .auth-container .card { width: 100%; }
        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: var(--text-light); font-weight: bold; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .auth-container p { text-align: center; margin-top: 1rem; color: var(--text-light); }
        .auth-container p a { color: var(--primary-blue); text-decoration: none; font-weight: bold; cursor: pointer; }
        .user-type-selection { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .user-type-selection label { flex: 1; padding: 0.8rem; border: 1px solid #ddd; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.2s ease; }
        .user-type-selection input[type="radio"] { display: none; }
        .user-type-selection input[type="radio"]:checked + label { background-color: var(--primary-blue); color: white; border-color: var(--primary-blue); }
    </style>
</head>
<body>

    <!-- ======================= 
         Authentication Wrapper
         (Shown only when not logged in)
         ======================= -->
    <div id="auth-wrapper" class="hidden">
        <div class="auth-header">
             <div class="logo" data-translate="logo">নিরাময়</div>
        </div>
        
        <!-- Login Section -->
        <div id="login-section" class="auth-page">
            <div class="auth-container">
                <div class="card">
                    <h3 style="text-align: center;" data-translate="login_title">লগইন করুন</h3>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-email" data-translate="profile_email">ইমেইল</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password" data-translate="login_password">পাসওয়ার্ড</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit" class="btn-primary" data-translate="login_button">লগইন</button>
                    </form>
                    <p><span data-translate="login_prompt">কোনো অ্যাকাউন্ট নেই?</span> <a class="auth-link" data-target="register"><span data-translate="login_register_link">এখানে রেজিস্টার করুন</span></a></p>
                </div>
            </div>
        </div>
        
        <!-- Registration Section -->
        <div id="register-section" class="auth-page hidden">
            <div class="auth-container">
                <div class="card">
                    <h3 style="text-align: center;" data-translate="register_title">নতুন অ্যাকাউন্ট তৈরি করুন</h3>
                    <form id="register-form">
                        <div class="form-group">
                            <label data-translate="register_account_type">অ্যাকাউন্টের ধরন</label>
                            <div class="user-type-selection">
                                <input type="radio" id="type-user" name="user_type" value="user" checked>
                                <label for="type-user" data-translate="register_type_user"><i class="fas fa-user"></i> ব্যবহারকারী</label>
                                <input type="radio" id="type-doctor" name="user_type" value="doctor">
                                <label for="type-doctor" data-translate="register_type_doctor"><i class="fas fa-user-md"></i> ডাক্তার</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="register-name" data-translate="profile_name">পুরো নাম</label>
                            <input type="text" id="register-name" required>
                        </div>
                        <div class="form-group">
                            <label for="register-email" data-translate="profile_email">ইমেইল</label>
                            <input type="email" id="register-email" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password" data-translate="login_password">পাসওয়ার্ড</label>
                            <input type="password" id="register-password" required>
                        </div>
                        <button type="submit" class="btn-primary" data-translate="register_button">রেজিস্টার</button>
                    </form>
                     <p><span data-translate="register_prompt">ইতিমধ্যে অ্যাকাউন্ট আছে?</span> <a class="auth-link" data-target="login"><span data-translate="register_login_link">এখানে লগইন করুন</span></a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ======================= 
         Main Application Wrapper
         (Shown only after successful login)
         ======================= -->
    <div id="main-app-wrapper" class="hidden">
        <!-- ======== NAVIGATION ======== -->
        <header class="desktop-header">
            <div class="top-bar">
                <div class="logo nav-link" data-target="chat" data-translate="logo">নিরাময়</div>
                <div class="search-and-lang-wrapper">
                    <div class="search-container">
                        <input type="text" placeholder="এখানে খুঁজুন..." class="search-input" data-translate="search_placeholder">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <select id="language-switcher-mobile">
                         <option value="bn">বাংলা</option>
                         <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="nav-desktop">
                <div class="menu">
                    <a href="#" class="nav-link active" data-target="chat"><i class="fas fa-home"></i><span data-translate="nav_home">হোম</span></a>
                    <a href="#" class="nav-link" data-target="booking"><i class="fas fa-calendar-alt"></i><span data-translate="nav_booking">ডাক্তার বুকিং</span></a>
                    <a href="#" class="nav-link" data-target="emergency"><i class="fas fa-first-aid"></i><span data-translate="nav_emergency">জরুরী</span></a>
                    <a href="#" class="nav-link" data-target="account-handler"><i class="fas fa-user-circle"></i><span data-translate="nav_account">অ্যাকাউন্ট</span></a>
                    <a href="#" class="nav-link" data-target="logout"><i class="fas fa-sign-out-alt"></i><span data-translate="nav_logout">লগআউট</span></a>
                    <select id="language-switcher">
                        <option value="bn">বাংলা</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
        </header>

        <div class="bottom-nav">
            <a href="#" class="nav-link active" data-target="chat"><i class="fas fa-home"></i><span data-translate="nav_home_mobile">হোম</span></a>
            <a href="#" class="nav-link" data-target="booking"><i class="fas fa-calendar-alt"></i><span data-translate="nav_booking_mobile">বুকিং</span></a>
            <a href="#" class="nav-link" data-target="emergency"><i class="fas fa-first-aid"></i><span data-translate="nav_emergency_mobile">জরুরী</span></a>
            <a href="#" class="nav-link" data-target="account-handler"><i class="fas fa-user-circle"></i><span data-translate="nav_account_mobile">অ্যাকাউন্ট</span></a>
        </div>
        
        <main>
            <!-- AI Chat Section -->
            <section id="chat" class="page-section">
                <div class="chat-page">
                    <div class="chat-container">
                        <div class="chat-header">
                            <h3 data-translate="chat_title">AI স্বাস্থ্য পরামর্শ</h3>
                        </div>
                        <div class="chat-box">
                            <div class="chat-bubble ai">
                                <i class="fas fa-hand-holding-medical icon"></i>
                                <span data-translate="chat_welcome">নমস্কার! আমি নিরাময়, আপনার ডিজিটাল স্বাস্থ্য সহকারী। আপনার কী অসুবিধা হচ্ছে, অনুগ্রহ করে বলুন।</span>
                            </div>
                            <div class="chat-bubble user">
                                <span data-translate="chat_user_symptom">আমার গত ২ দিন ধরে অনেক জ্বর এবং তীব্র মাথা ব্যথা।</span>
                            </div>
                             <div class="chat-bubble ai">
                                <div class="typing-indicator">
                                    <span></span><span></span><span></span>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" placeholder="আপনার উপসর্গ এখানে লিখুন..." data-translate="chat_input_placeholder">
                            <button class="voice-btn" title="ভয়েস ইনপুট"><i class="fas fa-microphone"></i></button>
                            <button class="send-btn" title="পাঠান"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Patient Dashboard / User Profile Section -->
            <section id="dashboard" class="page-section hidden">
                <div class="dashboard-page">
                    <div class="dashboard-header">
                        <h2 data-translate="dashboard_title">অ্যাকাউন্ট</h2>
                        <p data-translate="dashboard_subtitle">আপনার প্রোফাইল এবং ব্যক্তিগত তথ্য এখানে দেখতে ও পরিচালনা করতে পারবেন।</p>
                    </div>
                    <div class="dashboard-grid">
                        <div class="card">
                            <h3><i class="fas fa-notes-medical"></i> <span data-translate="dashboard_recent_symptoms">সাম্প্রতিক উপসর্গ</span></h3>
                            <ul>
                                <li data-translate="symptom_fever">জ্বর (১০১° ফাঃ)</li>
                                <li data-translate="symptom_headache">তীব্র মাথা ব্যথা</li>
                                <li data-translate="symptom_bodyache">শরীর ব্যথা</li>
                            </ul>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-prescription-bottle-alt"></i> <span data-translate="dashboard_prescriptions">বর্তমান প্রেসক্রিপশন</span></h3>
                            <p data-translate="prescription_details">Napa Extra (65mg) - দিনে ২ বার, খাওয়ার পর।</p>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-calendar-check"></i> <span data-translate="dashboard_appointments">পরবর্তী অ্যাপয়েন্টমেন্ট</span></h3>
                            <p data-translate="appointment_details">ডাঃ আনিকা আহমেদ - আগামীকাল, বিকাল ৪:০০</p>
                        </div>
                        <div class="card card-upload">
                            <h3><i class="fas fa-file-upload"></i> <span data-translate="dashboard_upload">মেডিকেল রিপোর্ট আপলোড</span></h3>
                            <p data-translate="upload_instruction">আপনার প্রেসক্রিপশন বা টেস্ট রিপোর্ট এখানে আপলোড করুন।</p>
                            <button class="btn-upload" data-translate="upload_button">ফাইল বাছাই করুন (PDF, JPG)</button>
                        </div>
                        <div class="card card-ai-insights">
                             <h3><i class="fas fa-lightbulb"></i> <span data-translate="dashboard_ai_insights">AI পরামর্শ</span></h3>
                             <p data-translate="ai_advice">আপনার উপসর্গ অনুযায়ী, পর্যাপ্ত বিশ্রাম এবং প্রচুর পরিমাণে জল পান করা অত্যন্ত জরুরি। জ্বর না কমলে ডাক্তারের সাথে যোগাযোগ করুন।</p>
                        </div>
                        <div class="card mood-meter">
                            <h3><i class="fas fa-smile-beam"></i> <span data-translate="dashboard_mood_meter">আজকের মুড মিটার</span></h3>
                            <p data-translate="mood_question">আপনি আজ কেমন অনুভব করছেন?</p>
                            <div class="mood-icons">
                                <span>😊</span><span>🙂</span><span>😐</span><span>😕</span><span>😞</span>
                            </div>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-user-edit"></i> <span data-translate="profile_title">আপনার প্রোফাইল সম্পাদনা করুন</span></h3>
                            <form onsubmit="event.preventDefault(); alert('প্রোফাইল আপডেট করা হয়েছে!');">
                                <div class="form-group">
                                    <label for="fullName" data-translate="profile_name">পুরো নাম</label>
                                    <input type="text" id="fullName" value="ব্যবহারকারীর নাম">
                                </div>
                                <div class="form-group">
                                    <label for="email" data-translate="profile_email">ইমেইল</label>
                                    <input type="email" id="email" value="user@example.com" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="phone" data-translate="profile_phone">ফোন নম্বর</label>
                                    <input type="tel" id="phone" value="+8801234567890">
                                </div>
                                <div class="form-group">
                                    <label for="dob" data-translate="profile_dob">জন্ম তারিখ</label>
                                    <input type="date" id="dob">
                                </div>
                                <button type="submit" class="btn-primary" data-translate="profile_save_button">পরিবর্তন সংরক্ষণ করুন</button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Doctor Booking Section -->
            <section id="booking" class="page-section hidden">
                <div class="booking-page">
                    <h2 data-translate="booking_title">আপনার পছন্দের ডাক্তার খুঁজুন</h2>
                    <div class="filters">
                        <select><option selected data-translate="filter_speciality">বিশেষত্ব বাছাই করুন</option><option>মেডিসিন</option><option>কার্ডিওলজি</option></select>
                        <select><option selected data-translate="filter_language">ভাষা বাছাই করুন</option><option>বাংলা</option><option>English</option></select>
                        <select><option selected data-translate="filter_availability">উপস্থিতি</option><option>আজ</option><option>আগামীকাল</option></select>
                    </div>
                    <div class="doctor-list">
                        <div class="doctor-card">
                            <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?q=80&w=2070&auto=format&fit=crop" alt="Doctor Photo">
                            <div class="doctor-info">
                                <h4 data-translate="doctor1_name">ডাঃ আনিকা আহমেদ</h4>
                                <p data-translate="doctor1_speciality">মেডিসিন বিশেষজ্ঞ</p>
                                <div class="rating"> <i class="fas fa-star"></i> 4.8 (120 reviews) </div>
                                <div class="tags"> <span class="tag">বাংলা</span> <span class="tag">English</span> </div>
                            </div>
                            <button class="btn-book" data-translate="book_appointment_button">অ্যাপয়েন্টমেন্ট বুক করুন</button>
                        </div>
                         <div class="doctor-card">
                            <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?q=80&w=2070&auto=format&fit=crop" alt="Doctor Photo">
                            <div class="doctor-info">
                                <h4 data-translate="doctor2_name">ডাঃ রহমান চৌধুরী</h4>
                                <p data-translate="doctor2_speciality">হৃদরোগ বিশেষজ্ঞ (কার্ডিওলজিস্ট)</p>
                                <div class="rating"> <i class="fas fa-star"></i> 4.9 (250 reviews) </div>
                                <div class="tags"> <span class="tag">বাংলা</span> </div>
                            </div>
                            <button class="btn-book" data-translate="book_appointment_button">অ্যাপয়েন্টমেন্ট বুক করুন</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Emergency Section -->
            <section id="emergency" class="page-section hidden">
                <div class="emergency-page">
                    <div class="emergency-container">
                        <button class="sos-button" onclick="alert('জরুরী সতর্কতা পাঠানো হচ্ছে!')">
                            <i class="fas fa-bell"></i>
                            <span>SOS</span>
                        </button>
                        <p data-translate="emergency_instruction">জরুরী সাহায্যের জন্য বাটনটি চেপে ধরুন। আপনার অবস্থান নিকটস্থ পরিষেবা কেন্দ্রে পাঠানো হবে।</p>
                        <div class="quick-calls">
                            <a href="tel:999" class="call-btn"> <i class="fas fa-ambulance"></i> <span data-translate="emergency_ambulance">অ্যাম্বুলেন্স</span> </a>
                            <a href="tel:16263" class="call-btn"> <i class="fas fa-phone-alt"></i> <span data-translate="emergency_hotline">স্বাস্থ্য হটলাইন</span> </a>
                            <a href="tel:FAMILY_NUMBER" class="call-btn"> <i class="fas fa-user-friends"></i> <span data-translate="emergency_family">পরিবার</span> </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Doctor Profile Section -->
            <section id="doctor-profile" class="page-section hidden">
                 <div class="dashboard-page">
                    <div class="dashboard-header">
                        <h2 data-translate="doctor_profile_title">ডাক্তার প্রোফাইল</h2>
                        <p data-translate="doctor_profile_subtitle">আপনার তথ্য এখানে যোগ বা পরিবর্তন করুন।</p>
                    </div>
                    <div class="auth-container" style="margin: auto;">
                        <div class="card">
                            <h3><i class="fas fa-user-md"></i> <span data-translate="doctor_profile_details_title">আপনার বিবরণ</span></h3>
                            <form id="doctor-profile-form" onsubmit="event.preventDefault(); alert('প্রোফাইল আপডেট করা হয়েছে!');">
                                <div class="form-group">
                                    <label for="doctor-name" data-translate="profile_name">পুরো নাম</label>
                                    <input type="text" id="doctor-name" placeholder="আপনার পুরো নাম">
                                </div>
                                <div class="form-group">
                                    <label for="doctor-email" data-translate="profile_email">ইমেইল</label>
                                    <input type="email" id="doctor-email" readonly>
                                </div>
                                 <div class="form-group">
                                    <label for="doctor-speciality" data-translate="doctor_profile_speciality">বিশেষত্ব</label>
                                    <input type="text" id="doctor-speciality" placeholder="যেমন, মেডিসিন বিশেষজ্ঞ">
                                </div>
                                 <div class="form-group">
                                    <label for="doctor-qualifications" data-translate="doctor_profile_qualifications">যোগ্যতা</label>
                                    <input type="text" id="doctor-qualifications" placeholder="যেমন, MBBS, FCPS">
                                </div>
                                 <div class="form-group">
                                    <label for="doctor-chamber" data-translate="doctor_profile_chamber">চেম্বার বিবরণ</label>
                                    <textarea id="doctor-chamber" placeholder="ঠিকানা, সময়সূচী, এবং যোগাযোগের তথ্য লিখুন।"></textarea>
                                </div>
                                <button type="submit" class="btn-primary" data-translate="profile_save_button">পরিবর্তন সংরক্ষণ করুন</button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // === DOM ELEMENTS ===
            const authWrapper = document.getElementById('auth-wrapper');
            const mainAppWrapper = document.getElementById('main-app-wrapper');
            const navLinks = document.querySelectorAll('.nav-link');
            const authLinks = document.querySelectorAll('.auth-link');
            const pageSections = document.querySelectorAll('.page-section');
            const loginSection = document.getElementById('login-section');
            const registerSection = document.getElementById('register-section');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');

            // === AUTHENTICATION STATE (using localStorage for simulation) ===
            let authState = {
                isLoggedIn: localStorage.getItem('isLoggedIn') === 'true',
                userType: localStorage.getItem('userType') || null
            };

            // === PAGE & UI VISIBILITY FUNCTIONS ===
            function showMainPage(targetId) {
                pageSections.forEach(section => section.classList.add('hidden'));
                const targetSection = document.getElementById(targetId);
                if (targetSection) targetSection.classList.remove('hidden');
                
                document.querySelectorAll('.nav-link').forEach(nav => {
                    nav.classList.remove('active');
                    if (nav.getAttribute('data-target') === targetId) nav.classList.add('active');
                });
                window.scrollTo(0, 0);
            }
            
            function showAuthPage(targetId) {
                if(targetId === 'login') {
                    loginSection.classList.remove('hidden');
                    registerSection.classList.add('hidden');
                } else {
                    loginSection.classList.add('hidden');
                    registerSection.classList.remove('hidden');
                }
            }
            
            function updateUIForAuthState() {
                if (authState.isLoggedIn) {
                    mainAppWrapper.classList.remove('hidden');
                    authWrapper.classList.add('hidden');
                    showMainPage('chat'); // Default page after login
                } else {
                    mainAppWrapper.classList.add('hidden');
                    authWrapper.classList.remove('hidden');
                    showAuthPage('login'); // Default page for non-logged-in users
                }
            }

            // === EVENT LISTENERS ===
            
            // Main navigation inside the app
            navLinks.forEach(link => {
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    let targetId = this.getAttribute('data-target');

                    if (targetId === 'account-handler') {
                        targetId = authState.userType === 'doctor' ? 'doctor-profile' : 'dashboard';
                    } else if (targetId === 'logout') {
                        localStorage.removeItem('isLoggedIn');
                        localStorage.removeItem('userType');
                        authState.isLoggedIn = false;
                        authState.userType = null;
                        updateUIForAuthState();
                        alert('আপনি সফলভাবে লগ আউট করেছেন।');
                        return;
                    }
                    showMainPage(targetId);
                });
            });
            
            // Links within the auth wrapper (toggling Login <-> Register)
            authLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    const targetId = this.getAttribute('data-target');
                    showAuthPage(targetId);
                });
            });

            // === FORM SUBMISSIONS (UPDATED PART) ===
            loginForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const email = document.getElementById('login-email').value.trim();
                const password = document.getElementById('login-password').value;

                let userType = null;

                // Check for default credentials
                if (email === 'user@niramoy.com' && password === 'user123') {
                    userType = 'user';
                } else if (email === 'doctor@niramoy.com' && password === 'doctor123') {
                    userType = 'doctor';
                }

                if (userType) {
                    // If login is successful
                    authState.isLoggedIn = true;
                    authState.userType = userType;
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userType', userType);

                    // If doctor logs in, populate their email in the profile
                    if (userType === 'doctor') {
                        document.getElementById('doctor-email').value = email;
                    }
                    
                    alert('লগইন সফল হয়েছে!');
                    updateUIForAuthState();
                } else {
                    // If login fails
                    alert('ভুল ইমেইল অথবা পাসওয়ার্ড। অনুগ্রহ করে আবার চেষ্টা করুন।');
                }
            });
            
            registerForm.addEventListener('submit', (event) => {
                event.preventDefault();
                // In a real app, you would send data to a server here
                alert('রেজিস্ট্রেশন সফল হয়েছে! অনুগ্রহ করে এখন লগইন করুন।');
                showAuthPage('login');
            });

            // === INITIAL LOAD ===
            updateUIForAuthState();
        });

        // === LANGUAGE CHANGE SCRIPT ===
        document.addEventListener('DOMContentLoaded', function() {
            const translations = {
                en: {
                    page_title: "Niramoy - Your Health, In Your Language", logo: "Niramoy", search_placeholder: "Search here...",
                    nav_home: "Home", nav_booking: "Doctor Booking", nav_emergency: "Emergency", nav_account: "Account", nav_logout: "Logout",
                    nav_home_mobile: "Home", nav_booking_mobile: "Booking", nav_emergency_mobile: "Emergency", nav_account_mobile: "Account",
                    chat_title: "AI Health Consultation", chat_welcome: "Hello! I am Niramoy, your digital health assistant. Please tell me what's bothering you.", chat_user_symptom: "I have had a high fever and a severe headache for the last 2 days.", chat_input_placeholder: "Write your symptoms here...",
                    dashboard_title: "Account", dashboard_subtitle: "View and manage your profile and personal information here.", dashboard_recent_symptoms: "Recent Symptoms",
                    symptom_fever: "Fever (101°F)", symptom_headache: "Severe Headache", symptom_bodyache: "Body Ache",
                    dashboard_prescriptions: "Current Prescriptions", prescription_details: "Napa Extra (65mg) - 2 times a day, after meals.",
                    dashboard_appointments: "Next Appointment", appointment_details: "Dr. Anika Ahmed - Tomorrow, 4:00 PM",
                    dashboard_upload: "Upload Medical Reports", upload_instruction: "Upload your prescriptions or test reports here.", upload_button: "Choose File (PDF, JPG)",
                    dashboard_ai_insights: "AI Insights", ai_advice: "Based on your symptoms, adequate rest and plenty of water are crucial. Contact a doctor if the fever persists.",
                    dashboard_mood_meter: "Today's Mood Meter", mood_question: "How are you feeling today?",
                    booking_title: "Find Your Preferred Doctor", filter_speciality: "Select Speciality", filter_language: "Select Language", filter_availability: "Availability",
                    doctor1_name: "Dr. Anika Ahmed", doctor1_speciality: "Medicine Specialist", doctor2_name: "Dr. Rahman Chowdhury", doctor2_speciality: "Cardiologist", book_appointment_button: "Book Appointment",
                    emergency_instruction: "Press and hold the button for emergency help. Your location will be sent to the nearest service center.", emergency_ambulance: "Ambulance", emergency_hotline: "Health Hotline", emergency_family: "Family",
                    profile_title: "Edit Your Profile", profile_name: "Full Name", profile_email: "Email", profile_phone: "Phone Number", profile_dob: "Date of Birth", profile_save_button: "Save Changes",
                    login_title: "Login to Your Account", login_password: "Password", login_button: "Login", login_prompt: "Don't have an account?", login_register_link: "Register here",
                    register_title: "Create a New Account", register_account_type: "Account Type", register_type_user: "User", register_type_doctor: "Doctor", register_button: "Register", register_prompt: "Already have an account?", register_login_link: "Login here",
                    doctor_profile_title: "Doctor Profile", doctor_profile_subtitle: "Add or update your information here.", doctor_profile_details_title: "Your Details", doctor_profile_speciality: "Speciality", doctor_profile_qualifications: "Qualifications", doctor_profile_chamber: "Chamber Details",
                },
                bn: {
                    page_title: "নিরাময় - আপনার স্বাস্থ্য, আপনার ভাষায়", logo: "নিরাময়", search_placeholder: "এখানে খুঁজুন...",
                    nav_home: "হোম", nav_booking: "ডাক্তার বুকিং", nav_emergency: "জরুরী", nav_account: "অ্যাকাউন্ট", nav_logout: "লগআউট",
                    nav_home_mobile: "হোম", nav_booking_mobile: "বুকিং", nav_emergency_mobile: "জরুরী", nav_account_mobile: "অ্যাকাউন্ট",
                    chat_title: "AI স্বাস্থ্য পরামর্শ", chat_welcome: "নমস্কার! আমি নিরাময়, আপনার ডিজিটাল স্বাস্থ্য সহকারী। আপনার কী অসুবিধা হচ্ছে, অনুগ্রহ করে বলুন।", chat_user_symptom: "আমার গত ২ দিন ধরে অনেক জ্বর এবং তীব্র মাথা ব্যথা।", chat_input_placeholder: "আপনার উপসর্গ এখানে লিখুন...",
                    dashboard_title: "অ্যাকাউন্ট", dashboard_subtitle: "আপনার প্রোফাইল এবং ব্যক্তিগত তথ্য এখানে দেখতে ও পরিচালনা করতে পারবেন।", dashboard_recent_symptoms: "সাম্প্রতিক উপসর্গ",
                    symptom_fever: "জ্বর (১০১° ফাঃ)", symptom_headache: "তীব্র মাথা ব্যথা", symptom_bodyache: "শরীর ব্যথা",
                    dashboard_prescriptions: "বর্তমান প্রেসক্রিপশন", prescription_details: "Napa Extra (65mg) - দিনে ২ বার, খাওয়ার পর।",
                    dashboard_appointments: "পরবর্তী অ্যাপয়েন্টমেন্ট", appointment_details: "ডাঃ আনিকা আহমেদ - আগামীকাল, বিকাল ৪:০০",
                    dashboard_upload: "মেডিকেল রিপোর্ট আপলোড", upload_instruction: "আপনার প্রেসক্রিপশন বা টেস্ট রিপোর্ট এখানে আপলোড করুন।", upload_button: "ফাইল বাছাই করুন (PDF, JPG)",
                    dashboard_ai_insights: "AI পরামর্শ", ai_advice: "আপনার উপসর্গ অনুযায়ী, পর্যাপ্ত বিশ্রাম এবং প্রচুর পরিমাণে জল পান করা অত্যন্ত জরুরি। জ্বর না কমলে ডাক্তারের সাথে যোগাযোগ করুন।",
                    dashboard_mood_meter: "আজকের মুড মিটার", mood_question: "আপনি আজ কেমন অনুভব করছেন?",
                    booking_title: "আপনার পছন্দের ডাক্তার খুঁজুন", filter_speciality: "বিশেষত্ব বাছাই করুন", filter_language: "ভাষা বাছাই করুন", filter_availability: "উপস্থিতি",
                    doctor1_name: "ডাঃ আনিকা আহমেদ", doctor1_speciality: "মেডিসিন বিশেষজ্ঞ", doctor2_name: "ডাঃ রহমান চৌধুরী", doctor2_speciality: "হৃদরোগ বিশেষজ্ঞ (কার্ডিওলজিস্ট)", book_appointment_button: "অ্যাপয়েন্টমেন্ট বুক করুন",
                    emergency_instruction: "জরুরী সাহায্যের জন্য বাটনটি চেপে ধরুন। আপনার অবস্থান নিকটস্থ পরিষেবা কেন্দ্রে পাঠানো হবে।", emergency_ambulance: "অ্যাম্বুলেন্স", emergency_hotline: "স্বাস্থ্য হটলাইন", emergency_family: "পরিবার",
                    profile_title: "আপনার প্রোফাইল সম্পাদনা করুন", profile_name: "পুরো নাম", profile_email: "ইমেইল", profile_phone: "ফোন নম্বর", profile_dob: "জন্ম তারিখ", profile_save_button: "পরিবর্তন সংরক্ষণ করুন",
                    login_title: "লগইন করুন", login_password: "পাসওয়ার্ড", login_button: "লগইন", login_prompt: "কোনো অ্যাকাউন্ট নেই?", login_register_link: "এখানে রেজিস্টার করুন",
                    register_title: "নতুন অ্যাকাউন্ট তৈরি করুন", register_account_type: "অ্যাকাউন্টের ধরন", register_type_user: "ব্যবহারকারী", register_type_doctor: "ডাক্তার", register_button: "রেজিস্টার", register_prompt: "ইতিমধ্যে অ্যাকাউন্ট আছে?", register_login_link: "এখানে লগইন করুন",
                    doctor_profile_title: "ডাক্তার প্রোফাইল", doctor_profile_subtitle: "আপনার তথ্য এখানে যোগ বা পরিবর্তন করুন।", doctor_profile_details_title: "আপনার বিবরণ", doctor_profile_speciality: "বিশেষত্ব", doctor_profile_qualifications: "যোগ্যতা", doctor_profile_chamber: "চেম্বার বিবরণ",
                }
            };

            const languageSwitchers = [document.getElementById('language-switcher'), document.getElementById('language-switcher-mobile')];

            const setLanguage = (lang) => {
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        if (element.hasAttribute('placeholder')) {
                             element.placeholder = translations[lang][key];
                        } else {
                            element.textContent = translations[lang][key];
                        }
                    }
                });
                languageSwitchers.forEach(s => s.value = lang);
                localStorage.setItem('niramoy-lang', lang);
            };

            const savedLang = localStorage.getItem('niramoy-lang') || 'bn';
            setLanguage(savedLang);

            languageSwitchers.forEach(switcher => {
                switcher.addEventListener('change', (event) => {
                    setLanguage(event.target.value);
                });
            });
        });
    </script>
</body>
</html>
